% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/operator-summarize.R
\name{summarise_spectra}
\alias{summarise_spectra}
\alias{summarize_spectra}
\title{Summarise Spectra by Group}
\usage{
summarise_spectra(spectra, stats = c("mean", "sd", "se", "n"), na.rm = TRUE)

summarize_spectra(spectra, stats = c("mean", "sd", "se", "n"), na.rm = TRUE)
}
\arguments{
\item{spectra}{A \code{ruffs_spectra_collection_grouped} object created by
\code{\link[=group_spectra]{group_spectra()}}.}

\item{stats}{Character vector specifying which statistics to compute.
Options are: \code{"mean"}, \code{"sd"}, \code{"se"}, \code{"min"}, \code{"max"}, \code{"median"},
\code{"n"}. Default is \code{c("mean", "sd", "se", "n")}.}

\item{na.rm}{Logical. If \code{TRUE} (default), NA values are removed before
computing statistics.}
}
\value{
A \code{ruffs_spectra_summary} object, which is a named list where each
element corresponds to a group. Each group element is a dataframe with:
\itemize{
\item \code{wavelength}: Wavelength values (nm)
\item Additional columns for each requested statistic (mean, sd, etc.)
}
The object also contains attributes:
\itemize{
\item \code{group_names}: Character vector of group names
\item \code{stats_computed}: Character vector of statistics that were computed
\item \code{instrument}, \code{data_type}, \code{wavelength_range}: Preserved from input
}
}
\description{
Computes summary statistics (mean, standard deviation, standard error,
minimum, maximum, and sample size) for each group in a grouped spectral
collection.
}
\details{
Statistics available:
\describe{
\item{mean}{Arithmetic mean across group members}
\item{sd}{Sample standard deviation}
\item{se}{Standard error of the mean (sd / sqrt(n))}
\item{min}{Minimum value}
\item{max}{Maximum value}
\item{median}{Median value}
\item{n}{Sample size (number of spectra in group)}
}

The function assumes all spectra within a group share identical wavelength
grids (as would be the case after using \code{\link[=interpolate_spectra]{interpolate_spectra()}}).

For groups with only one spectrum, \code{sd} and \code{se} will be \code{NA}.
}
\examples{
\dontrun{
# Process and group spectra
spectra <- svcreader("path/to/files") |>
  interpolate_spectra() |>
  stitch_spectra() |>
  correct_spectra() |>
  group_spectra(separator = "_", position = 2)

# Compute default statistics (mean, sd, se, n)
summary <- summarise_spectra(spectra)

# Compute all available statistics
summary_full <- summarise_spectra(spectra,
  stats = c("mean", "sd", "se", "min", "max", "median", "n"))

# Access summary for a specific group
summary[["site1_oak"]]
head(summary[["site1_oak"]])
#   wavelength       mean          sd          se n
# 1        350 0.05234521 0.002345210 0.001354213 3
# 2        351 0.05312453 0.002456321 0.001418324 3
# ...

# Plot mean with error bars
grp_data <- summary[["site1_oak"]]
plot(grp_data$wavelength, grp_data$mean, type = "l")
# Add Â± 1 SE bands
lines(grp_data$wavelength, grp_data$mean + grp_data$se, lty = 2)
lines(grp_data$wavelength, grp_data$mean - grp_data$se, lty = 2)
}

}
\seealso{
\code{\link[=group_spectra]{group_spectra()}} for creating grouped collections,
\code{\link[=average_spectra]{average_spectra()}} for computing just the mean,
\code{\link[=plot_summary]{plot_summary()}} for visualising summary statistics
}
